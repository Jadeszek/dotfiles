#compdef git-feature
#description create a feature branch

local curcontext=$curcontext state line ret=1
declare -A opt_args

_arguments -C \
    ': :->command' \
    '*:: :->option-or-argument' && ret=0

case $state in
    (command)
        declare -a commands
        commands=(
            'finish:merge feature into the current branch'
        )
        _describe -t commands command commands && ret=0
        ;;
    (option-or-argument)
        curcontext=${curcontext%:*}-$line[1]:
        case $line[1] in
            (finish)
                _arguments -C \
                    ':branch-name:__git_feature_branch_names'
                ;;
        esac
esac
