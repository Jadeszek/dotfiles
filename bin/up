#!/usr/bin/env zsh
emulate zsh

# load functions
old_pwd=$(pwd)
cd `dirname $0`
source lib.zsh

read_config
cd "$REPOSITORY"

if git branch &>/dev/null; then
  git submodule init
  git submodule update
fi

deploy $plugins

if [[ "$1" == 'x' ]]; then
  deploy $extra
fi

check_env $dependencies $extra_dependencies

cd $old_pwd
