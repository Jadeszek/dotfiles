#!/usr/bin/env zsh

function do_reinit() {
pgrep ratpoison &>/dev/null && ratpoison -c restart
}

function do_connect() {
xrandr \
    --output LVDS1 --auto \
    --left-of $1 \
    --output $1 --auto
do_reinit
}

function do_disconnect() {
xrandr --auto
do_reinit
}

if [[ $1 == startup ]]
then
  xrandr | grep -q "HDMI2 connected" && do_connect HDMI2
fi

case "$SRANDRD_ACTION" in
  "HDMI2 connected") do_connect HDMI2 ;;
  "HDMI1 connected") do_connect HDMI1 ;;
  "VGA1 connected")  do_connect VGA1  ;;
  *) do_disconnect ;;
esac
