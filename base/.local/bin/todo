#!/usr/bin/env zsh

if [[ -z $PATTERN ]]; then
  if command -v rg >/dev/null; then
    PATTERN='TODO|HACK|FIXME|OPTIMIZE'
  else
    PATTERN='TODO\|HACK\|FIXME\|OPTIMIZE'
  fi
fi

if [[ -z $@ ]]; then
  FILES=(.)
else
  FILES=($@)
fi

if command -v rg >/dev/null; then
  rg "$PATTERN" "${FILES[@]}"
else
  grep --color=auto -R "$PATTERN" "${FILES[@]}"
fi
