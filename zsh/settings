
#
# .zsh/settings
# Maintainer:	Philipp Millar <philipp.millar@gmx.de>
#

# shell-options
setopt autocd		# change directories easily
setopt no_beep		# disable annoying beeps
setopt complete_in_word # also do complete in words
setopt correct		# try to find misspellings
setopt auto_pushd	# always use the directory stack
setopt pushd_ignore_dups # never duplicate entries
setopt extended_glob	# use # ~ and ^ for filename generation
setopt longlistjobs	# display PID when suspending processes as well
setopt braceccl		# use advanced brace expasion like {a-b}
setopt nohup		# don't send hup when shell terminates
setopt transient_rprompt # remove rprompt when command is issued
setopt functionargzero	# set $0 to the function call
setopt local_options	# allow functions to have local options
setopt prompt_subst	# fully update prompts
setopt interactive_comments # allow comments in interactive shells
			    # useful for adding "tags" to commands (for searching)

unsetopt flowcontrol	# deactivate "freezing"

# modules
autoload -U colors && colors	# use colours
autoload -U zmv			# great batch-renaming tool
autoload -U zcalc		# nice calculator
autoload -U zfinit && zfinit	# zftp

autoload -U url-quote-magic	# smart urls
zle -N self-insert url-quote-magic
autoload -U edit-command-line	# edit commandline in editor
zle -N edit-command-line

eval $(dircolors -b) # colours for ls
umask 066 # initialize new files with -rw-------

# prompt
# function to add count of my todo list
function __todo {
if $(which todo.sh &> /dev/null); then
    local count=$(todo.sh | grep 'TODO:' | awk '{print $2}')
    if [[ ! $count == 0 ]]; then
	echo "$count "
    fi
fi
}
# set the prompt
export PROMPT='%m %B%0(#.%{$fg[red]%}#.$(__todo)%{$fg[white]%}>) %b'
export RPROMPT='%0(5c,%c,%~) %1(j.(%j%).) %(?..%B%{$fg[red]%}%?%{$fg[white]%}%b)'
precmd() (
    if [[ $TERM == rxvt* || $TERM == screen* ]]; then
	# Set urgent on completed jobs
	echo -ne '\a'
	# set title
	print -Pn "\e]2;%m: %~\a"
    fi
)

# hashed directories
hash -d doc=/usr/share/doc
hash -d log=/var/log

hash -d code=~philipp/code
hash -d data=~philipp/data

hash -d dokumente=~data/Dokumente
hash -d bibliothek=~data/Bibliothek

hash -d dropbox=~data/Dropbox
hash -d uni=~data/Dokumente/Uni/6.\ Semester

# vim:set sw=4 foldmethod=marker ft=zsh:
