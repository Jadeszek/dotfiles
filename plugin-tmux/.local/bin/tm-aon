#!/usr/bin/env ruby
# encoding: utf-8
require 'English'

if ARGV.empty?
  session = 'std'
else
  session = ARGV[0]
end

if ARGV[1]
  $stderr.puts 'extra arguments'
  exit 1
end

# set xterm title to session
print "\e]0;tmux: #{session}\a"

# try to attach or create session
`tmux attach -t #{session}`

unless $CHILD_STATUS.success?
  puts "creating new session #{session}"
  `tmux new -s #{session}`
end

# set xterm title to 'detached'
print "\e]0;tmux: detached\a"
